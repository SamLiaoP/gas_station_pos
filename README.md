# GAS_STATION_POS_v2 系統

這是加油站POS系統的簡化版本，專注於更有效率的資料管理和雲端整合準備。

## 系統特點

- **資料庫改進**: 從Excel檔案升級為SQLite資料庫，提升資料處理效能和可靠性
- 簡化的資料結構：從多個資料夾和文件簡化為單一SQLite資料庫檔案
- 整合的交易記錄：所有交易（進貨、銷售、退貨）統一管理在資料庫中
- 雲端整合準備：設計為可以輕鬆與雲端硬碟整合
- 保留原有功能：維持與原系統相同的業務功能

## 資料結構

系統使用SQLite資料庫儲存資料，主要資料表包括：

1. `system_config` - 儲存系統配置，如班別時間
2. `staff_farmers` - 儲存員工和廠商資訊，包含分潤比例
3. `inventory` - 儲存所有產品的庫存資訊
4. `transactions` - 儲存所有交易記錄，包括銷售、進貨和退貨

資料庫檔案位於: `data/gas_station.db`

## 從Excel遷移到SQLite

系統提供了從舊版Excel檔案遷移到SQLite資料庫的工具。遷移步驟：

1. 確保舊的Excel檔案位於`data`目錄中
2. 執行遷移工具: `python convert_to_sqlite.py`
3. 遷移工具會將舊Excel資料轉換到SQLite資料庫，並在`data/excel_backup`中備份原始檔案
4. 系統會自動開始使用SQLite資料庫

## 雲端整合

系統已準備好與雲端硬碟整合。`cloud_helper.py` 檔案包含將來與雲端整合所需的函數，可以輕鬆改寫為實際的雲端API調用。

使用雲端整合時的步驟：

1. 修改 `cloud_helper.py` 中的讀寫函數，使用實際的雲端API
2. 可以考慮使用雲端SQL資料庫替換本地SQLite資料庫，進一步提升雲端整合度

## 安裝和使用

1. 確保安裝了 Python 3.7 或更高版本
2. 安裝所需的套件：`pip install -r requirements.txt`
3. 執行系統：`python run.py`
4. 在瀏覽器中訪問：`http://127.0.0.1:8080/`

## 功能列表

- 進貨管理：記錄從廠商的進貨
- 銷售管理：記錄銷售給客戶的商品
- 退貨管理：處理退回給廠商的商品
- 庫存管理：跟踪所有產品的庫存水平
- 報表生成：生成各種業務報表，包括廠商分潤、員工分潤等
- 班別銷售：查看特定班別的銷售記錄

## 系統架構

- `app.py` - 主應用程式入口
- `run.py` - 啟動應用程式的腳本
- `models/` - 資料模型和業務邏輯
- `routes/` - 網頁路由和控制器
- `utils/` - 公用功能和輔助函數
- `database/` - 資料庫管理模組
- `templates/` - HTML模板
- `static/` - 靜態文件（CSS、JavaScript等）
- `data/` - 資料存儲目錄
- `reports/` - 報表輸出目錄
- `cloud_helper.py` - 雲端整合助手
- `convert_to_sqlite.py` - Excel資料轉換到SQLite工具

## 未來發展

1. 完整的雲端整合，使資料能夠實時同步到雲端儲存
2. 多使用者支援，允許多個使用者同時存取系統
3. 行動裝置應用程式，方便在移動設備上使用
4. 更豐富的報表功能，提供更多分析工具
5. 自動備份與復原功能
6. 考慮遷移到更強大的資料庫系統，如MySQL或PostgreSQL

## 系統對比

| 功能 | GAS_STATION_POS (v1) | GAS_STATION_POS_v2 (Excel版) | GAS_STATION_POS_v2 (SQLite版) |
|------|---------------------|---------------------------|---------------------------|
| 資料儲存 | 多個目錄與檔案 | 簡化為3個核心Excel檔案 | 單一SQLite資料庫 |
| 交易記錄 | 分散在不同檔案 | 統一在單一transactions檔案 | 統一在transactions資料表 |
| 資料架構 | 日期為主的目錄結構 | 功能為主的檔案結構 | 標準化資料庫結構 |
| 報表生成 | 支援 | 支援且更高效 | 支援且更高效 |
| 雲端整合 | 不支援 | 已準備好雲端整合架構 | 更適合雲端整合 |
| 資料備份 | 手動封存 | 可整合雲端自動備份 | 可使用資料庫備份機制 |
| 資料安全 | 低 | 中 | 高 |
| 資料查詢效能 | 低 | 中 | 高 |
| 多使用者支援 | 不支援 | 有限支援 | 更好的支援 |

## 授權

Copyright © 2025. 保留所有權利。
